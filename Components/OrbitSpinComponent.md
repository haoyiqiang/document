# OrbitSpinComponent

## æ¦‚è¿°
`OrbitSpinComponent` æ˜¯ä¸€ä¸ªè½¨é“æ—‹è½¬ç»„ä»¶ï¼Œç”¨äºè®©å­èŠ‚ç‚¹å›´ç»•æŒ‡å®šä¸­å¿ƒç‚¹è¿›è¡Œåœ†å‘¨è¿åŠ¨ã€‚æ”¯æŒå¤šä¸ªå«æ˜ŸèŠ‚ç‚¹çš„è‡ªåŠ¨åˆ†å¸ƒã€æ½®æ±é”å®šã€æ—‹è½¬æ–¹å‘æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œé€‚ç”¨äºåˆ›å»ºè¡Œæ˜Ÿç³»ç»Ÿã€æ—‹è½¬æ­¦å™¨ã€è½¨é“é˜²å¾¡ç­‰æ•ˆæœã€‚

**ç»§æ‰¿å…³ç³»ï¼š** `OrbitSpinComponent` â†’ `Component` â†’ `Node`

## ä¸»è¦ç‰¹æ€§
- ğŸŒ å¤šå«æ˜ŸèŠ‚ç‚¹è½¨é“è¿åŠ¨
- âš¡ è‡ªåŠ¨è§’åº¦åˆ†å¸ƒç®—æ³•
- ğŸ”„ é¡ºæ—¶é’ˆ/é€†æ—¶é’ˆæ—‹è½¬æ§åˆ¶
- ğŸ¯ æ½®æ±é”å®šåŠŸèƒ½ï¼ˆå§‹ç»ˆæœå‘è½¨é“ä¸­å¿ƒï¼‰
- ğŸ“ æ—‹è½¬åç§»è§’åº¦æ”¯æŒ
- ğŸ® åŠ¨æ€æ·»åŠ /ç§»é™¤å«æ˜ŸèŠ‚ç‚¹
- âš™ï¸ å®æ—¶è½¨é“å‚æ•°è°ƒæ•´
- ğŸ§¹ è‡ªåŠ¨å­èŠ‚ç‚¹æ£€æµ‹å’Œé…ç½®

## ä¾èµ–èŠ‚ç‚¹
- **å­èŠ‚ç‚¹: Node2D** - è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰å­èŠ‚ç‚¹ä½œä¸ºå«æ˜ŸèŠ‚ç‚¹

## å¯¼å‡ºå±æ€§

### `orbitRadius: float = 100.0`
è½¨é“åŠå¾„ã€‚

**ç±»å‹ï¼š** `float`  
**é»˜è®¤å€¼ï¼š** `100.0`  
**å•ä½ï¼š** åƒç´   
**è¯´æ˜ï¼š** å«æ˜ŸèŠ‚ç‚¹åˆ°è½¨é“ä¸­å¿ƒçš„è·ç¦»

### `orbitPeriod: float = 2.0`
è½¨é“å‘¨æœŸã€‚

**ç±»å‹ï¼š** `float`  
**é»˜è®¤å€¼ï¼š** `2.0`  
**å•ä½ï¼š** ç§’  
**è¯´æ˜ï¼š** å®Œæˆä¸€åœˆæ—‹è½¬æ‰€éœ€çš„æ—¶é—´

### `orbitCenter: Node2D`
è½¨é“ä¸­å¿ƒèŠ‚ç‚¹ã€‚

**ç±»å‹ï¼š** `Node2D`  
**é»˜è®¤å€¼ï¼š** `null`  
**è¯´æ˜ï¼š** å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨çˆ¶å®ä½“ä½œä¸ºè½¨é“ä¸­å¿ƒ

### `enableTidalLock: bool = true`
æ˜¯å¦å¯ç”¨æ½®æ±é”å®šã€‚

**ç±»å‹ï¼š** `bool`  
**é»˜è®¤å€¼ï¼š** `true`  
**è¯´æ˜ï¼š** å¯ç”¨åå«æ˜ŸèŠ‚ç‚¹ä¼šå§‹ç»ˆæœå‘è½¨é“ä¸­å¿ƒ

### `rotationOffset: float = 0.0`
æ—‹è½¬åç§»è§’åº¦ã€‚

**ç±»å‹ï¼š** `float`  
**é»˜è®¤å€¼ï¼š** `0.0`  
**å•ä½ï¼š** å¼§åº¦  
**è¯´æ˜ï¼š** åœ¨æ½®æ±é”å®šåŸºç¡€ä¸Šçš„é¢å¤–æ—‹è½¬åç§»

### `clockwise: bool = true`
æ˜¯å¦é¡ºæ—¶é’ˆæ—‹è½¬ã€‚

**ç±»å‹ï¼š** `bool`  
**é»˜è®¤å€¼ï¼š** `true`  
**è¯´æ˜ï¼š** `true` ä¸ºé¡ºæ—¶é’ˆï¼Œ`false` ä¸ºé€†æ—¶é’ˆ

## çŠ¶æ€å±æ€§

### `satelliteNodes: Array[Node2D]`
å«æ˜ŸèŠ‚ç‚¹åˆ—è¡¨ã€‚

**ç±»å‹ï¼š** `Array[Node2D]`  
**è¯´æ˜ï¼š** å­˜å‚¨æ‰€æœ‰å‚ä¸è½¨é“è¿åŠ¨çš„å­èŠ‚ç‚¹

### `satelliteAngularOffsets: Array[float]`
å«æ˜ŸèŠ‚ç‚¹è§’åº¦åç§»åˆ—è¡¨ã€‚

**ç±»å‹ï¼š** `Array[float]`  
**è¯´æ˜ï¼š** å­˜å‚¨æ¯ä¸ªå«æ˜ŸèŠ‚ç‚¹çš„åˆå§‹è§’åº¦åç§»

### `orbitTime: float = 0.0`
è½¨é“æ—¶é—´ç´¯è®¡ã€‚

**ç±»å‹ï¼š** `float`  
**è¯´æ˜ï¼š** ç”¨äºè®¡ç®—å½“å‰è½¨é“è§’åº¦çš„ç´¯è®¡æ—¶é—´

## æ ¸å¿ƒæ–¹æ³•

### `setupOrbitNodes() -> void`
è®¾ç½®è½¨é“èŠ‚ç‚¹ã€‚

**åŠŸèƒ½ï¼š**
1. å¦‚æœæ²¡æœ‰è®¾ç½®è½¨é“ä¸­å¿ƒï¼Œä½¿ç”¨çˆ¶å®ä½“
2. è‡ªåŠ¨è·å–æ‰€æœ‰å­èŠ‚ç‚¹ä½œä¸ºå«æ˜ŸèŠ‚ç‚¹
3. ä¸ºæ¯ä¸ªå«æ˜ŸèŠ‚ç‚¹è®¾ç½®å‡åŒ€åˆ†å¸ƒçš„è§’åº¦åç§»
4. è¾“å‡ºè®¾ç½®ä¿¡æ¯

### `updateOrbitPositions() -> void`
æ›´æ–°è½¨é“ä½ç½®ã€‚

**åŠŸèƒ½ï¼š**
1. æ£€æŸ¥è½¨é“ä¸­å¿ƒæ˜¯å¦å­˜åœ¨
2. éå†æ‰€æœ‰å«æ˜ŸèŠ‚ç‚¹
3. è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„è½¨é“ä½ç½®
4. æ›´æ–°èŠ‚ç‚¹å…¨å±€ä½ç½®
5. åº”ç”¨æ½®æ±é”å®šæ—‹è½¬ï¼ˆå¦‚æœå¯ç”¨ï¼‰

### `addSatellite(satellite: Node2D, angleOffset: float = 0.0) -> void`
æ·»åŠ å«æ˜ŸèŠ‚ç‚¹ã€‚

**å‚æ•°ï¼š**
- `satellite` - è¦æ·»åŠ çš„å«æ˜ŸèŠ‚ç‚¹
- `angleOffset` - è§’åº¦åç§»ï¼ˆå¯é€‰ï¼‰

**åŠŸèƒ½ï¼š**
1. ä¸´æ—¶éšè—å«æ˜ŸèŠ‚ç‚¹
2. å°†èŠ‚ç‚¹æ·»åŠ ä¸ºå­èŠ‚ç‚¹
3. é‡æ–°è®¾ç½®è½¨é“èŠ‚ç‚¹
4. ç«‹å³è®¾ç½®åˆ°æ­£ç¡®çš„è½¨é“ä½ç½®
5. åº”ç”¨æ½®æ±é”å®šï¼ˆå¦‚æœå¯ç”¨ï¼‰
6. æ˜¾ç¤ºå«æ˜ŸèŠ‚ç‚¹

### `removeSatellite(satellite: Node2D) -> void`
ç§»é™¤å«æ˜ŸèŠ‚ç‚¹ã€‚

**å‚æ•°ï¼š** `satellite` - è¦ç§»é™¤çš„å«æ˜ŸèŠ‚ç‚¹  
**åŠŸèƒ½ï¼š**
1. ä»å«æ˜ŸèŠ‚ç‚¹åˆ—è¡¨ä¸­ç§»é™¤
2. ä»è§’åº¦åç§»åˆ—è¡¨ä¸­ç§»é™¤
3. è¾“å‡ºç§»é™¤ä¿¡æ¯

## é…ç½®æ–¹æ³•

### `setOrbitRadius(radius: float) -> void`
è®¾ç½®è½¨é“åŠå¾„ã€‚

**å‚æ•°ï¼š** `radius` - æ–°çš„è½¨é“åŠå¾„

### `setOrbitPeriod(period: float) -> void`
è®¾ç½®è½¨é“å‘¨æœŸã€‚

**å‚æ•°ï¼š** `period` - æ–°çš„è½¨é“å‘¨æœŸï¼ˆç§’ï¼‰

### `setOrbitSpeed(speed: float) -> void`
è®¾ç½®è½¨é“é€Ÿåº¦ï¼ˆå‘åå…¼å®¹ï¼‰ã€‚

**å‚æ•°ï¼š** `speed` - è§’é€Ÿåº¦ï¼ˆå¼§åº¦/ç§’ï¼‰  
**è¯´æ˜ï¼š** å°†è§’é€Ÿåº¦è½¬æ¢ä¸ºè½¨é“å‘¨æœŸ

### `setEnableTidalLock(enable: bool) -> void`
è®¾ç½®æ½®æ±é”å®šã€‚

**å‚æ•°ï¼š** `enable` - æ˜¯å¦å¯ç”¨æ½®æ±é”å®š

### `setRotationOffset(offset: float) -> void`
è®¾ç½®æ—‹è½¬åç§»ã€‚

**å‚æ•°ï¼š** `offset` - æ—‹è½¬åç§»è§’åº¦ï¼ˆå¼§åº¦ï¼‰

### `setClockwise(isClockwise: bool) -> void`
è®¾ç½®æ—‹è½¬æ–¹å‘ã€‚

**å‚æ•°ï¼š** `isClockwise` - æ˜¯å¦é¡ºæ—¶é’ˆæ—‹è½¬

### `toggleRotationDirection() -> void`
åˆ‡æ¢æ—‹è½¬æ–¹å‘ã€‚

**åŠŸèƒ½ï¼š** åœ¨é¡ºæ—¶é’ˆå’Œé€†æ—¶é’ˆä¹‹é—´åˆ‡æ¢

## ç”Ÿå‘½å‘¨æœŸ

### `_ready() -> void`
ç»„ä»¶åˆå§‹åŒ–ã€‚

**åŠŸèƒ½ï¼š** è°ƒç”¨ `setupOrbitNodes()` è®¾ç½®è½¨é“èŠ‚ç‚¹

### `_physics_process(delta: float) -> void`
ç‰©ç†æ›´æ–°ã€‚

**å‚æ•°ï¼š** `delta` - æ—¶é—´å¢é‡  
**åŠŸèƒ½ï¼š**
1. è®¡ç®—è§’é€Ÿåº¦
2. æ ¹æ®æ—‹è½¬æ–¹å‘è°ƒæ•´è§’é€Ÿåº¦ç¬¦å·
3. æ›´æ–°è½¨é“æ—¶é—´
4. æ›´æ–°è½¨é“ä½ç½®

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€é…ç½®
```gdscript
# åˆ›å»ºè½¨é“æ—‹è½¬ç»„ä»¶
var orbitComponent = OrbitSpinComponent.new()
orbitComponent.orbitRadius = 150.0
orbitComponent.orbitPeriod = 3.0
orbitComponent.clockwise = true
orbitComponent.enableTidalLock = true
```

### åŠ¨æ€æ·»åŠ å«æ˜Ÿ
```gdscript
# æ·»åŠ å«æ˜ŸèŠ‚ç‚¹
var satellite = Node2D.new()
orbitComponent.addSatellite(satellite, PI / 4)  # 45åº¦åç§»
```

### å®æ—¶è°ƒæ•´å‚æ•°
```gdscript
# åŠ¨æ€è°ƒæ•´è½¨é“å‚æ•°
orbitComponent.setOrbitRadius(200.0)
orbitComponent.setOrbitPeriod(1.5)
orbitComponent.toggleRotationDirection()
```

### å¤šå«æ˜Ÿç³»ç»Ÿ
```gdscript
# åˆ›å»ºå¤šå«æ˜Ÿç³»ç»Ÿ
var orbitComponent = OrbitSpinComponent.new()
orbitComponent.orbitRadius = 100.0
orbitComponent.orbitPeriod = 2.0

# æ·»åŠ å¤šä¸ªå«æ˜Ÿï¼ˆä¼šè‡ªåŠ¨å‡åŒ€åˆ†å¸ƒï¼‰
for i in range(3):
    var satellite = createSatellite()
    orbitComponent.addSatellite(satellite)
```

## æ³¨æ„äº‹é¡¹

1. **å­èŠ‚ç‚¹æ£€æµ‹ï¼š** ç»„ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹æ‰€æœ‰ `Node2D` ç±»å‹çš„å­èŠ‚ç‚¹ä½œä¸ºå«æ˜Ÿ
2. **è§’åº¦åˆ†å¸ƒï¼š** å¤šä¸ªå«æ˜Ÿä¼šè‡ªåŠ¨å‡åŒ€åˆ†å¸ƒåœ¨è½¨é“ä¸Š
3. **æ½®æ±é”å®šï¼š** å¯ç”¨åå«æ˜Ÿä¼šå§‹ç»ˆæœå‘è½¨é“ä¸­å¿ƒï¼Œé€‚åˆè¡Œæ˜Ÿç³»ç»Ÿ
4. **æ€§èƒ½è€ƒè™‘ï¼š** å¤§é‡å«æ˜ŸèŠ‚ç‚¹å¯èƒ½å½±å“æ€§èƒ½ï¼Œå»ºè®®åˆç†æ§åˆ¶æ•°é‡
5. **åæ ‡ç³»ç»Ÿï¼š** ä½¿ç”¨å…¨å±€åæ ‡ç³»ç»Ÿï¼Œç¡®ä¿è½¨é“ä¸­å¿ƒä½ç½®æ­£ç¡®
6. **æ—¶é—´å•ä½ï¼š** è½¨é“å‘¨æœŸä½¿ç”¨ç§’ä¸ºå•ä½ï¼Œè§’åº¦ä½¿ç”¨å¼§åº¦

## åº”ç”¨åœºæ™¯

- **è¡Œæ˜Ÿç³»ç»Ÿï¼š** åˆ›å»ºå¤ªé˜³ç³»æˆ–ç±»ä¼¼çš„å¤©ä½“ç³»ç»Ÿ
- **æ—‹è½¬æ­¦å™¨ï¼š** åˆ¶ä½œæ—‹è½¬çš„é˜²å¾¡å¡”æˆ–æ”»å‡»è£…ç½®
- **ç²’å­æ•ˆæœï¼š** åˆ›å»ºæ—‹è½¬çš„ç²’å­æˆ–ç‰¹æ•ˆ
- **UIå…ƒç´ ï¼š** åˆ¶ä½œæ—‹è½¬çš„ç•Œé¢å…ƒç´ 
- **æ¸¸æˆæœºåˆ¶ï¼š** å®ç°è½¨é“é˜²å¾¡ã€æ—‹è½¬å¹³å°ç­‰æ¸¸æˆæœºåˆ¶

## ç›¸å…³ç»„ä»¶

- **Component** - åŸºç¡€ç»„ä»¶ç³»ç»Ÿ
- **Node2D** - 2DèŠ‚ç‚¹åŸºç±»
- **TimerComponentBase** - æ—¶é—´æ§åˆ¶ç›¸å…³
- **MovementComponent** - è¿åŠ¨ç³»ç»Ÿç›¸å…³ 